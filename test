
kubeRG

pradk8cluster

pradacr

*********************AKS************************

1. az aks get-credentials --resource-group kubeRG --name pradk8cluster
2. kubectl get nodes
3. kubectl get namespace
4. kubectl create namespace ratingapp
5. kubectl create -f azure-aks.yaml


6. kubectl describe secret mongosecret --namespace ratingapp

kubectl get pods --all-namespaces



***********************Python**************************
docker build .
docker images
docker tag <UID> <Actualname:Tag>

docker run -d -p 80:5000 mypythonapp:latest
(host port : container port)

docker ps


*****ACR*****
1. az acr login -n pradacr 

2. ACR has to follow a format --> reg/repo:tag
   pradacr.azurecr.io/mypythonapp:latest
   docker tag pycharger:v1 pradacr.azurecr.io/pycharger:v1
   
3. docker push pradacr.azurecr.io/mypythonapp:latest

4.	Build using ACR without docker
	az acr build --registry pradacr --image rating-web:v1 .
	az acr build --registry pradacr --image rating-api:v1 .



kubectl port-forward flink-j 8081:8081


C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl delete -f jobmanager-service.yaml
service "flink-jobmanager" deleted

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl delete -f flink-configuration-configmap.yaml
configmap "flink-config" deleted

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl delete -f taskmanager-session-deployment.yaml
deployment.apps "flink-taskmanager" deleted

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl delete -f jobmanager-session-deployment.yaml
deployment.apps "flink-jobmanager" deleted

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl create -f flink-configuration-configmap.yaml
configmap/flink-config created

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl create -f jobmanager-service.yaml
service/flink-jobmanager created

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl create -f jobmanager-session-deployment.yaml
deployment.apps/flink-jobmanager created

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl create -f taskmanager-session-deployment.yaml
deployment.apps/flink-taskmanager created

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl get pods
NAME                                 READY   STATUS    RESTARTS   AGE
flink-jobmanager-577bdb85dc-67fkn    1/1     Running   0          7s
flink-taskmanager-68647695dc-spqrp   1/1     Running   0          4s
flink-taskmanager-68647695dc-xhrj6   1/1     Running   0          4s

C:\Users\KR827EH\OneDrive - EY\Desktop\Learning\aksdocker\flink>kubectl port-forward flink-jobmanager-577bdb85dc-67fkn 8081:8081
Forwarding from 127.0.0.1:8081 -> 8081
Forwarding from [::1]:8081 -> 8081
Handling connection for 8081
Handling connection for 8081
Handling connection for 8081
Handling connection for 8081
Handling connection for 8081
Handling connection for 8081
Handling connection for 8081
E0112 18:32:18.468075   28776 portforward.go:233] lost connection to pod
